<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Statistics</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Mental Health Statistics (1990 - 2025)</h1>

    <div class="chart-container">
        <!-- Bar Chart -->
        <svg id="barChart" width="600" height="400"></svg>

        <!-- Pie Chart -->
        <div class="pie-chart-container">
            <svg id="pieChart" width="400" height="400"></svg>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Mental Health Data
            const data = [
                { year: 1990, individuals: 350000000 },
                { year: 2001, individuals: 450000000 },
                { year: 2010, individuals: 450000000 },
                { year: 2020, individuals: 1000000000 },
                { year: 2025, individuals: 1000000000 }
            ];

            // BAR CHART SETUP
            const barWidth = 600, barHeight = 400;
            const maxValue = d3.max(data, d => d.individuals);
            
            const svg = d3.select("#barChart")
                .attr("width", barWidth)
                .attr("height", barHeight);

            const xScale = d3.scaleBand()
                .domain(data.map(d => d.year))
                .range([50, barWidth - 50])
                .padding(0.4);

            const yScale = d3.scaleLinear()
                .domain([0, maxValue])
                .range([barHeight - 50, 50]);

            // Add Bars
            svg.selectAll(".bar")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", d => xScale(d.year))
                .attr("y", d => yScale(d.individuals))
                .attr("width", xScale.bandwidth())
                .attr("height", d => barHeight - 50 - yScale(d.individuals))
                .on("mouseover", (event, d) => {
                    d3.select("#tooltip").style("display", "block")
                        .html(`<strong>Year:</strong> ${d.year}<br><strong>Individuals:</strong> ${d.individuals.toLocaleString()}`)
                        .style("left", `${event.pageX + 10}px`)
                        .style("top", `${event.pageY - 20}px`);
                })
                .on("mouseout", () => {
                    d3.select("#tooltip").style("display", "none");
                })
                .on("click", (event, d) => {
                    window.location.href = `details.html?year=${d.year}`;
                });

            // PIE CHART SETUP
            const pieWidth = 400, pieHeight = 400, pieRadius = Math.min(pieWidth, pieHeight) / 2;
            
            const pieSvg = d3.select("#pieChart")
                .append("g")
                .attr("transform", `translate(${pieWidth / 2}, ${pieHeight / 2})`);

            const pie = d3.pie().value(d => d.individuals);
            const arc = d3.arc().innerRadius(0).outerRadius(pieRadius);
            const color = d3.scaleOrdinal(d3.schemeCategory10);

            pieSvg.selectAll("path")
                .data(pie(data))
                .enter()
                .append("path")
                .attr("class", "arc")
                .attr("d", arc)
                .attr("fill", (d, i) => color(i))
                .on("mouseover", (event, d) => {
                    d3.select("#tooltip").style("display", "block")
                        .html(`<strong>Year:</strong> ${d.data.year}<br><strong>Individuals:</strong> ${d.data.individuals.toLocaleString()}`)
                        .style("left", `${event.pageX + 10}px`)
                        .style("top", `${event.pageY - 20}px`);
                })
                .on("mouseout", () => {
                    d3.select("#tooltip").style("display", "none");
                })
                .on("click", (event, d) => {
                    window.location.href = `details.html?year=${d.data.year}`;
                });

        });
    </script>

</body>
</html>





